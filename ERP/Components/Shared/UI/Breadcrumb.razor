@using Microsoft.AspNetCore.Components

<nav class="breadcrumb-nav" aria-label="Breadcrumb">
    <ol class="breadcrumb-list">
        @if (Items != null)
        {
            var visibleItems = Items.Where(i => !string.IsNullOrWhiteSpace(i.Label)).ToList();
            
            @foreach (var item in visibleItems)
            {
                var isLast = item == visibleItems.Last();
                
                <li class="breadcrumb-item @(isLast ? "active" : "")">
                    @if (isLast)
                    {
                        <span class="breadcrumb-text">@item.Label</span>
                    }
                    else if (!string.IsNullOrEmpty(item.Url))
                    {
                        <a href="@item.Url" class="breadcrumb-link">
                            @if (item.Label == "Home")
                            {
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="home-icon"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                            }
                            else
                            {
                                @item.Label
                            }
                        </a>
                    }
                    else
                    {
                        <span class="breadcrumb-text">@item.Label</span>
                    }

                    @if (!isLast)
                    {
                        <span class="breadcrumb-separator">
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
                        </span>
                    }
                </li>
            }
        }
    </ol>
</nav>

@code {
    [Parameter] public List<AppBreadcrumbItem> Items { get; set; } = new();
}

<style>
    .breadcrumb-nav {
        /* No extra padding/margin to keep it compact */
        padding: 0;
        margin-bottom: 4px;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    }

    .breadcrumb-list {
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        gap: 6px;
        list-style: none;
        margin: 0;
        padding-left: 10px;
    }

    .breadcrumb-item {
        display: flex;
        align-items: center;
        gap: 6px;
        font-size: 14px;
        line-height: 1.5;
        color: var(--text-secondary, #64748b);
    }

    .breadcrumb-link {
        color: var(--text-secondary, #64748b);
        text-decoration: none;
        display: flex;
        align-items: center;
        transition: color 0.15s ease;
    }

    .breadcrumb-link:hover {
        color: var(--primary-color, #2563eb);
    }
    
    .breadcrumb-link .home-icon {
        margin-top: -1px; /* Optical alignment */
    }

    .breadcrumb-text {
        color: var(--text-secondary, #64748b);
    }

    .breadcrumb-item.active .breadcrumb-text {
        color: var(--text-primary, #1e293b);
        font-weight: 600;
    }

    .breadcrumb-separator {
        display: flex;
        align-items: center;
        color: #cbd5e1; /* Lighter gray for separators */
    }

    /* Mobile responsiveness */
    @@media (max-width: 640px) {
        .breadcrumb-item {
            font-size: 13px;
        }
    }
    /* Bootstrap breadcrumb slash remove */
    .breadcrumb-item::before {
        content: none !important;
    }
</style>
